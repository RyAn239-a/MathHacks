<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Probability Visualizations</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
  </head>
  <body>
    <header class="header-container">
      <a href="{{ url_for('home') }}" class="btn" id="home">Back to Home</a>
      <h1>Monty Hall Problem</h1>
      <button class="bton" id="openModal">˅</button>
      <div class="modal" id="descriptionModal">
        <div class="modal-content">
          <button class="close-btn" id="closeModal">&times;</button>
          <h2>Monty Hall Problem</h2>
          <p>
            The Monty Hall problem is a famous probability puzzle based on a
            game show. There are three doors: behind one is a prize (a car), and
            behind the other two are goats. You pick one door. The host, who
            knows what’s behind each door, opens one of the remaining doors to
            reveal a goat. You then choose to stay with your original door or
            switch to the other unopened door. Surprisingly, switching doubles
            your chance of winning! When you first choose a door, you have a 1/3
            chance of picking the car and a 2/3 chance of picking a goat. After
            the host opens a door to reveal a goat, if you switch, you will win
            if your initial choice was a goat (which happens 2/3 of the time).
            If you stay, you only win if your initial choice was the car (which
            happens 1/3 of the time). This is the counterintuitive logic behind
            the Monty Hall problem.
          </p>
        </div>
      </div>
    </header>
    <div class="content">
      <form method="post">
        <input
          placeholder="Number of Trials"
          id="num_trials"
          name="num_trials"
        />
        <select placeholder="Strategy" id="strategy" name="strategy">
          <option value="" disabled selected hidden>Select a Strategy</option>
          <option value="switch">Switch</option>
          <option value="stay">Stay</option>
        </select>
        <select id="starting_door" name="starting_door">
          <option value="1">Door 1</option>
          <option value="2">Door 2</option>
          <option value="3">Door 3</option>
        </select>
        <button class="start" type="submit">Run Simulation</button>
      </form>

      {% if probability is defined %}
      <p>Probability of Winning: {{ probability }}%</p>
      {% endif %}
    </div>

    <div class="door" id="door1">Door 1</div>
    <div class="door" id="door2">Door 2</div>
    <div class="door" id="door3">Door 3</div>
    <script>
      const openBtn = document.getElementById("openModal");
      const modal = document.getElementById("descriptionModal");
      const closeBtn = document.getElementById("closeModal");

      openBtn.addEventListener("click", () => {
        modal.style.display = "flex"; // show modal with flex to center content
      });

      closeBtn.addEventListener("click", () => {
        modal.style.display = "none"; // hide modal
      });

      // Close modal if user clicks outside the content box
      window.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.style.display = "none";
        }
      });
    </script>
  </body>
</html>
